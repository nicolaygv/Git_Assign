(function(n,t){"use strict";function k(){f||(at(),rt())}function lt(){if(f=!0,u=quidget_payload,typeof quidget_srcs!="undefined"&&quidget_srcs.cc!=="undefined")for(var n in u)u[n].s=quidget_srcs.cc;rt()}function at(){var i=t.querySelectorAll("."+tt),n,h,f,o,c;if(i.length){for(n=0;n<i.length;n++)if(h=`sh-quidget-${n}`,i[n].setAttribute("id",h),e[h]=i[n],i[n].dataset.content){f=JSON.parse(i[n].dataset.content.replaceAll("*",'"'));r[n]={};r[n].id=h;u[n]={};for(o in f)r[n][o]=f[o],o==="src"&&(u[n].s=f[o]),o==="credit_card_id"&&(u[n].c=f[o]);f.api&&typeof quidget_srcs!="undefined"&&quidget_srcs[f.api]&&(r[n].src=quidget_srcs[f.api],u[n].s=quidget_srcs[f.api]);2!==Object.keys(u[n]).length&&(ti("Quidget: Unable to process the below tag:"),i[n].outerHTML?s(i[n].outerHTML):s(i[n]),u[n].s?s("Missing credit card ID!"):s("Missing account ID!"),delete u[n],ii())}c=["s","c"];u=u.filter((n=>t=>(t=>!n.has(t)&&n.add(t))(c.map(n=>t[n]).join("|")))(new Set))}}function rt(){if(typeof quidget_options!="undefined"&&(p=quidget_options),i.length>0)h(),v("quidget_loaded"),a(w,b);else if(u.length>0){const n=async()=>{const n=await fetch(dt(u));return await n.json()};n().then(n=>{n&&n.listingset&&n.listingset.listing?(i=n.listingset.listing,f?(w=n.payloadId,b=n.requestId,f=!1,document.readyState==="complete"&&k()):(h(),v("quidget_loaded"),a(n.payloadId,n.requestId))):(h(),v("quidget_loaded"),a(n.payloadId,n.requestId))}).catch(()=>{s("Something is wrong!"),u=[],f?(f=!1,document.readyState==="complete"&&k()):(h(),a())})}}function h(){var n,s;o=vt();for(let o=0;o<r.length;o++){var u=r[o].field,t=e[r[o].id],f=!1;for(n=0;n<i.length;n++)if(i[n]&&i[n].credit_card_id==r[o].credit_card_id&&i[n].src==r[o].src){s=i[n].is_active;u.indexOf("LogoImage")!==-1?yt(o,n,t,u):u.indexOf("Direct2Client")!==-1?pt(o,n,t,u):t.tagName==="A"?wt(o,n,t,u):bt(o,n,t,u);f=!0;s?t.classList.add(st):t.classList.add(ht);break}t.classList.remove(tt);t.classList.add(ot);f||gt(t)}}function vt(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,n=>(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16))}function yt(n,t,r,u){var e=i[t].is_active,f="",o;switch(u){case"LogoImageUrl":i[t].raw_logo&&(o=i[t].raw_logo,r.hasAttribute("width")&&(o+="&w="+r.getAttribute("width")),r.setAttribute("src",o));r.removeAttribute("style");break;case"LogoImageListingUrl":e===!1&&i[t].card_review_link?f=i[t].card_review_link:e===!0&&i[t].featured_card_table_link&&(f=i[t].featured_card_table_link);c(r,f,t,n);break;case"LogoImageCardDetailsLink":i[t].card_review_link&&(f=i[t].card_review_link);c(r,f,t,n);break;case"LogoImageLiteDetailUrl":e===!1&&i[t].card_review_link?f=i[t].card_review_link:e===!0&&i[t].card_review_link&&(f=i[t].card_review_link.replace("/credit-card/","/details/credit-card/"));c(r,f,t,n)}f=l(f,t,n);ut(r,t);r.tagName!=="A"||f||(r.hasChildNodes()?(r.children[0].id=r.id,r.replaceWith(...r.childNodes)):r.remove())}function pt(n,t,r,u){var e=i[t].is_active,o="Apply Now",f="";e===!1?f=i[t].card_review_link:(f=i[t].clickurl,window.location.href.indexOf("debugtracking")>-1&&(f+="&debugtrackingonclick=1"));f=l(f,t,n);switch(u){case"Direct2Client":i[t].card_name&&i[t].clickurl&&d(n,r,f,i[t].card_name,t);e===!1&&r.classList.contains("auto-apply-btn")&&(r.classList.remove("auto-apply-btn"),r.classList.add("auto-pdp-btn"));break;case"Direct2ClientButton":r.innerHTML&&(o=r.innerHTML);i[t].clickurl&&d(n,r,f,o,t);break;case"Direct2ClientLogo":i[t].raw_logo&&i[t].clickurl&&c(r,f,t,n);ut(r,t)}et(n,r);e!==!1||r.tagName!=="A"||r.hasChildNodes()||r.remove();r.tagName!=="A"||f||(r.hasChildNodes()?r.replaceWith(...r.childNodes):r.remove());f||"terms_and_conditions_link"!=u||r.remove()}function wt(n,t,r,u){var o=i[t].is_active,f="",e="";switch(u){case"LinkTagPDPUrl":i[t].card_review_link&&(f=i[t].card_review_link.replace("/credit-card/","/details/credit-card/"));break;case"terms_and_conditions_link":e="See Rates and Fees";(i[t].accountid==640029||i[t].accountid==639943||i[t].displayname=="American Express")&&(e="See Rates and Fees; terms apply");i[t][u]&&o&&(f=i[t][u]);break;default:o===!1&&i[t].card_review_link?f=i[t].card_review_link:i[t][u]&&(f=i[t][u])}f=l(f,t,n);d(n,r,f,e,t);et(n,r);f||("terms_and_conditions_link"==u?r.remove():r.replaceWith(r.innerHTML))}function bt(n,t,r,u){for(var e=u.split(","),f=i[t][e[0]],o=1;o<e.length;o++)f+=" "+i[t][e[o]];u==="description"&&(f=kt(n,f));r.innerHTML=ft(n,f,t)}function kt(n,t){var r="<li",i=t.split(r),u;return i.length>=5&&(u=i.slice(3,i.length).join(r),i.splice(3),i.push(u),i[3]&&i[3].indexOf(r)!==!1&&(i[3]=i[3].replaceAll(r,'<li style="display:none"'),i[3]+="<a href=\"#\" onclick=\"t=(this.innerHTML=='See More');l=document.querySelectorAll('#sh-quidget-"+n+" li');for(x=3;x<l.length;x++){l[x].style.display=(t)?'list-item':'none';}this.innerHTML=(t)?'See Less':'See More';return false;\">See More<\/a>")),i.join(r)}function c(n,t,r,u){var f=i[r].raw_logo;t=l(t,r,u);f&&n.hasChildNodes()&&(n.children[0].hasAttribute("width")&&(f+="&w="+n.children[0].getAttribute("width")),n.children[0].setAttribute("src",f),n.children[0].removeAttribute("style"));f?(t.indexOf("qurId=")!==-1&&(t+=o),n.setAttribute("href",t)):n.hasChildNodes()&&(n.children[0].id=n.id,n.replaceWith(...n.childNodes))}function ut(n,t){var r="",u;n.tagName==="IMG"?r=n:n.hasChildNodes()&&n.children[0].tagName==="IMG"&&(r=n.children[0]);r&&r.hasAttribute("alt")&&(u=r.getAttribute("alt"),i[t][u]&&r.setAttribute("alt",i[t][u]))}function d(n,t,i,u,f){var e;e="terms_and_conditions_link"==r[n].field?u:ft(n,u,f);e&&(t.innerHTML=e);i.indexOf("&qurId=")!==-1&&(i=i.replace("&qurId=","&qdg=1")+("&qurId="+o));t.setAttribute("href",i)}function l(n,t,u){var f=i[t].is_active,e=n;if(f===!1&&(n="",p.hasOwnProperty("inactive_cards_link_to_reviews")&&p.inactive_cards_link_to_reviews.toLowerCase()=="true"&&(n=e)),n!==""&&n.indexOf("&var2=")==-1){let t="";typeof quidget_tracking_query!="undefined"&&quidget_tracking_query.var2?t=r[u].var2?"&var2="+quidget_tracking_query.var2+"_"+r[u].var2:"&var2="+quidget_tracking_query.var2:r[u].var2&&(t="&var2="+r[u].var2);n.indexOf("&qurId=")!==-1?n=n.replace("&qurId=",t+"&qurId="):n+=t}return n}function ft(n,t,u){var o=i[u].is_active,f,e;if(t==="N/A N/A"&&(t="N/A"),(t===undefined||t==="")&&r[n].defaultValue&&(t=r[n].defaultValue),r[n].linkText&&i[u][r[n].linkText]?t=i[u][r[n].linkText]:r[n].linkText&&(t=r[n].linkText),"discontinued_disclaimer"==r[n].field&&o||(r[n].prependText&&(t=r[n].prependText+t),r[n].appendText&&(t+=r[n].appendText)),r[n].case)switch(r[n].case){case"u":t=t.toUpperCase();break;case"l":t=t.toLowerCase();break;case"uf":t=t.charAt(0).toUpperCase()+t.toLowerCase().slice(1);break;case"uw":for(f=t.toLowerCase().split(" "),e=0;e<f.length;e++)f[e]=f[e].charAt(0).toUpperCase()+f[e].substring(1);t=f.join(" ")}return r[n].removeText&&(t=t.replaceAll(r[n].removeText,"")),t}function et(n,t){r[n].linkRel&&t.setAttribute("rel",r[n].linkRel);r[n].linkTarget&&t.setAttribute("target",r[n].linkTarget)}function dt(){if(u){var n=it+"?qj="+encodeURIComponent(JSON.stringify(u));return window.location&&typeof window.location.hostname!="undefined"&&(n+="&qref="+window.location.hostname),window.location.href.indexOf("debugtracking")>-1&&(n+="&debugtrackingonclick=1"),n}return it}function gt(n){n.remove()}function a(n="",t=""){var i={},u,e,f,s;if(i.qplId=n,i.qrid=t,i.qurid=o,typeof r!="undefined"){u=[];for(e in r)f={},f.s=r[e].src,f.c=r[e].credit_card_id,f.f=r[e].field,u.push(f);s=["s","c","f"];u=u.filter((n=>t=>(t=>!n.has(t)&&n.add(t))(s.map(n=>t[n]).join("|")))(new Set));u=Object.assign({},u);i.plchldrs=JSON.stringify(u)}typeof quidget_tracking_query!="undefined"&&(i.qtrk=JSON.stringify(quidget_tracking_query));window.location&&typeof window.location.href!="undefined"&&(i.ref=window.location.href);document.referrer&&(i.refFormLink=document.referrer);ni(ct,i,null)}function ni(n,t,i){var r=new XMLHttpRequest,u;r.open("POST",n,!0);r.setRequestHeader("Content-Type","application/json; charset=UTF-8");u=JSON.stringify(t);typeof i=="function"&&(r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE){var n=r.status;n===0||n>=200&&n<400?i(r.responseText):v("QuidgetTrackingRequestFailed",{})}});r.send(u)}function v(n,t){var i=new Event(n);t&&(i.data=t);window.dispatchEvent(i)}function ti(){console.hasOwnProperty("group")&&typeof console.group=="function"&&console.group.apply(this,arguments)}function s(n){console.warn(n)}function ii(){console.hasOwnProperty("groupEnd")&&typeof console.groupEnd=="function"&&console.groupEnd()}function ri(){e=[];r=[];u=[];i={};o="";f=!1;w="";b=""}if(typeof n.shQuidget=="undefined"){var y={},g="https://www.nextinsure.com",nt="/ListingDisplay/",tt="sh-quidget-markup",ot="sh-quidget-rendered",st="sh-active-client",ht="sh-inactive-client",e=[],r=[],p={},u=[],i={},it=g+nt+"quidget",ct=g+nt+"qjtrk",o="",f=!1,w="",b="";y.initialize=function(){if(e){var n=Object.keys(e);n&&n.length>0&&ri()}k()};y.prefetch=function(){typeof quidget_payload!="undefined"&&quidget_payload!==""&&lt()};n.shQuidget=y}})(this,this.document);window.onload=function(){(typeof quidget_manual_execute=="undefined"||quidget_manual_execute!==!0)&&shQuidget.initialize()};typeof quidget_payload!="undefined"&&shQuidget.prefetch();
typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(n){"use strict";var u,i,t,r;if(n===null)throw new TypeError("Cannot convert undefined or null to object");for(u=Object(n),i=1;i<arguments.length;i++)if(t=arguments[i],t!==null)for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(u[r]=t[r]);return u},writable:!0,configurable:!0});
